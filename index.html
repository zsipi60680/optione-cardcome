<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תשלום Cardcom</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        #paymentIframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <iframe id="paymentIframe" src="about:blank"></iframe>
    <script>
        async function createPayment(paymentData) {
            try {
                const response = await fetch('/create-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(paymentData)
                });
                const result = await response.json();
                if (result.success) {
                    // עדכון ה־src של ה־iframe עם כתובת התשלום
                    document.getElementById('paymentIframe').src = result.paymentUrl;
                } else {
                    document.body.innerHTML = 'שגיאה: לא התקבל קישור תשלום.';
                }
            } catch (error) {
                document.body.innerHTML = 'שגיאה: לא ניתן להתחבר לשרת.';
            }
        }

        // // דוגמה לשליחה עם פרטי תשלום
        // createPayment({
        //     transactionId: '12345',
        //     amount: 100,
        //     contact: {
        //         name: 'John Doe',
        //         email: 'john.doe@example.com'
        //     }
        // });
    </script>
</body>
</html>
